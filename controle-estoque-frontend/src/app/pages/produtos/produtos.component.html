<div class="container">
    <h1>Gestão de Produtos</h1>

    <!-- Formulário para Cadastrar Produto -->
    <section class="form-section">
        <h2>Cadastrar Novo Produto</h2>
        <form #produtoForm="ngForm" (ngSubmit)="cadastrarProduto()">
            <label for="nomeProduto">Nome do Produto</label>
            <input type="text" id="nomeProduto" name="nomeProduto" [(ngModel)]="novoProduto.nomeProduto" placeholder="Ex: Vestido Floral" required>
            
            <label for="preco">Preço</label>
            <input type="number" id="preco" name="preco" [(ngModel)]="novoProduto.preco" placeholder="Ex: 120.50" required>
            
            <label for="quantidade">Quantidade em Estoque</label>
            <input type="number" id="quantidade" name="quantidade" [(ngModel)]="novoProduto.quantidadeEstoque" placeholder="Ex: 50" required>
            
            <label for="cor">Cor</label>
            <input type="text" id="cor" name="cor" [(ngModel)]="novoProduto.cor" placeholder="Ex: Azul">
            
            <label for="fornecedor">Fornecedor</label>
            <input type="text" id="fornecedor" name="fornecedor" [(ngModel)]="novoProduto.fornecedor" placeholder="Ex: Moda e Cia">
            
            <label for="descricao">Descrição</label>
            <input type="text" id="descricao" name="descricao" [(ngModel)]="novoProduto.descricao" placeholder="Ex: Vestido de algodão, tamanho M">
            
            <label for="tipoProduto">Tipo do Produto</label>
            <select id="tipoProduto" name="tipoProduto" [(ngModel)]="novoProduto.tipoProduto">
                <option value="" disabled>Selecione o Tipo</option>
                <option *ngFor="let tipo of tiposProduto" [value]="tipo">{{ tipo }}</option>
            </select>

            <button type="submit" [disabled]="!produtoForm.form.valid">Cadastrar Produto</button>
        </form>
        <p *ngIf="feedback" [ngStyle]="{'color': feedbackColor}">{{ feedback }}</p>
    </section>

    <hr>

    <!-- Seção para Listar Produtos -->
    <section class="list-section">
        <h2>Produtos em Estoque</h2>
        <table id="produtos-tabela">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                    <th>Preço</th>
                    <th>Estoque</th>
                    <th>Cor</th>
                    <th>Fornecedor</th>
                    <th>Descrição</th>
                    <th>Tipo</th>
                    <th>Ações</th> <!-- Nova coluna para os botões de ação -->
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let produto of produtos">
                    <td>{{ produto.id }}</td>
                    <td>{{ produto.nomeProduto }}</td>
                    <td>R$ {{ produto.preco | number: '1.2-2' }}</td>
                    <td>{{ produto.quantidadeEstoque }}</td>
                    <td>{{ produto.cor }}</td>
                    <td>{{ produto.fornecedor }}</td>
                    <td>{{ produto.descricao }}</td>
                    <td>{{ produto.tipoProduto }}</td>
                    <td>
                        <!-- Botão para dar baixa no estoque -->
                        <button class="action-button" (click)="darBaixaNoEstoque(produto.id)">Baixa</button>
                        <!-- Botão para deletar o produto -->
                        <button class="action-button delete-button" (click)="deletarProduto(produto.id)">Excluir</button>
                    </td>
                </tr>
            </tbody>
        </table>
        <p *ngIf="produtos.length === 0">Nenhum produto cadastrado.</p>
    </section>
    
    <hr>
    
    <!-- Seção para Buscar Produto por ID -->
    <section class="search-section">
      <h2>Buscar Produto por ID</h2>
      <button class="action-button" (click)="buscarPorId()">Buscar Produto</button>
    </section>
</div>
