<div class="container">
    <h1>Gestão de Produtos</h1>

    <!-- Formulário para Cadastrar Produto -->
    <section class="form-section">
        <h2>Cadastrar Novo Produto</h2>
        <form #produtoForm="ngForm" (ngSubmit)="cadastrarProduto()">
            <!-- Campo: Nome do Produto -->
            <label for="nomeProduto">Nome do Produto</label>
            <input type="text" id="nomeProduto" name="nomeProduto" [(ngModel)]="novoProduto.nomeProduto" placeholder="Ex: Vestido Floral" required>
            
            <!-- Campo: Preço -->
            <label for="preco">Preço</label>
            <input type="number" id="preco" name="preco" [(ngModel)]="novoProduto.preco" placeholder="Ex: 120.50" required>
            
            <!-- Campo: Quantidade em Estoque -->
            <label for="quantidade">Quantidade em Estoque</label>
            <input type="number" id="quantidade" name="quantidade" [(ngModel)]="novoProduto.quantidadeEstoque" placeholder="Ex: 50" required>
            
            <!-- Campo: Cor -->
            <label for="cor">Cor</label>
            <input type="text" id="cor" name="cor" [(ngModel)]="novoProduto.cor" placeholder="Ex: Azul">
            
            <!-- Campo: Fornecedor -->
            <label for="fornecedor">Fornecedor</label>
            <input type="text" id="fornecedor" name="fornecedor" [(ngModel)]="novoProduto.fornecedor" placeholder="Ex: Moda e Cia">
            
            <!-- Campo: Descrição -->
            <label for="descricao">Descrição</label>
            <input type="text" id="descricao" name="descricao" [(ngModel)]="novoProduto.descricao" placeholder="Ex: Vestido de algodão, tamanho M">
            
            <!-- Campo: Tipo de Produto (Dropdown) -->
            <label for="tipoProduto">Tipo do Produto</label>
            <select id="tipoProduto" name="tipoProduto" [(ngModel)]="novoProduto.tipoProduto">
                <option value="" disabled>Selecione o Tipo</option>
                <option *ngFor="let tipo of tiposProduto" [value]="tipo">{{ tipo }}</option>
            </select>

            <button type="submit" [disabled]="!produtoForm.form.valid">Cadastrar Produto</button>
        </form>
    </section>

    <hr>

    <!-- Seção para Listar Produtos -->
    <section class="list-section">
        <h2>Produtos em Estoque</h2>
        <div class="actions">
            <input type="text" [(ngModel)]="nomeParaBusca" placeholder="Buscar por nome">
            <button (click)="buscarPorNome()">Buscar Produto</button>
            <button (click)="fetchProdutos()">Mostrar Todos</button>
        </div>
        
        <p *ngIf="feedback" [ngStyle]="{'color': feedbackColor}">{{ feedback }}</p>

        <table id="produtos-tabela">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                    <th>Preço</th>
                    <th>Estoque</th>
                    <th>Cor</th>
                    <th>Fornecedor</th>
                    <th>Descrição</th>
                    <th>Tipo</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let produto of produtos">
                    <td>{{ produto.id }}</td>
                    <td>{{ produto.nomeProduto }}</td>
                    <td>R$ {{ produto.preco | number: '1.2-2' }}</td>
                    <td>{{ produto.quantidadeEstoque }}</td>
                    <td>{{ produto.cor }}</td>
                    <td>{{ produto.fornecedor }}</td>
                    <td>{{ produto.descricao }}</td>
                    <td>{{ produto.tipoProduto }}</td>
                    <td>
                        <div class="table-actions">
                            <button class="action-btn delete-btn" (click)="deletarProduto(produto.id)">Deletar</button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <p *ngIf="produtos.length === 0">Nenhum produto cadastrado.</p>
    </section>

    <hr>

    <!-- Seção para Dar Baixa no Estoque -->
    <section class="form-section">
        <h2>Dar Baixa no Estoque</h2>
        <label for="idParaBaixa">ID do Produto</label>
        <input type="number" id="idParaBaixa" name="idParaBaixa" [(ngModel)]="idParaBaixa" placeholder="Ex: 1" required>

        <label for="quantidadeParaBaixa">Quantidade para Baixa</label>
        <input type="number" id="quantidadeParaBaixa" name="quantidadeParaBaixa" [(ngModel)]="quantidadeParaBaixa" placeholder="Ex: 5" required>
        
        <button (click)="darBaixaNoEstoque()">Confirmar Baixa</button>
    </section>
</div>
